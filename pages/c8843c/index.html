<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>MySQL分区 | YAN</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/img/favicon.ico">
    <script async="async" src="https://fastly.jsdelivr.net/gh/chansanya/live2d-widget@v0.0.2/autoload.js"></script>
    <meta name="description" content="每天多学一点点">
    <meta name="keywords" content="Java,Linux">
    <meta name="theme-color" content="#11a8cd">
    
    <link rel="preload" href="/assets/css/0.styles.d30c10eb.css" as="style"><link rel="preload" href="/assets/js/app.7d8d5d19.js" as="script"><link rel="preload" href="/assets/js/3.e891d935.js" as="script"><link rel="preload" href="/assets/js/2.df3d443c.js" as="script"><link rel="preload" href="/assets/js/90.3d9e2d3b.js" as="script"><link rel="prefetch" href="/assets/js/1.adc6fe3a.js"><link rel="prefetch" href="/assets/js/10.8293a7db.js"><link rel="prefetch" href="/assets/js/100.40db1698.js"><link rel="prefetch" href="/assets/js/101.92a7c9f1.js"><link rel="prefetch" href="/assets/js/102.8c9f1312.js"><link rel="prefetch" href="/assets/js/103.5e78ca4e.js"><link rel="prefetch" href="/assets/js/104.fd2e4454.js"><link rel="prefetch" href="/assets/js/105.aa4835b6.js"><link rel="prefetch" href="/assets/js/106.b0593d4d.js"><link rel="prefetch" href="/assets/js/107.eada1d0b.js"><link rel="prefetch" href="/assets/js/108.12c3de25.js"><link rel="prefetch" href="/assets/js/109.999c7783.js"><link rel="prefetch" href="/assets/js/11.a5da9d62.js"><link rel="prefetch" href="/assets/js/110.53b3ee65.js"><link rel="prefetch" href="/assets/js/111.f56e2ed0.js"><link rel="prefetch" href="/assets/js/112.535f69ca.js"><link rel="prefetch" href="/assets/js/113.c290e34a.js"><link rel="prefetch" href="/assets/js/12.870f86dc.js"><link rel="prefetch" href="/assets/js/13.36ab137c.js"><link rel="prefetch" href="/assets/js/14.276df52b.js"><link rel="prefetch" href="/assets/js/15.e093160f.js"><link rel="prefetch" href="/assets/js/16.0a86efc3.js"><link rel="prefetch" href="/assets/js/17.f8bd7a6d.js"><link rel="prefetch" href="/assets/js/18.2b68bc70.js"><link rel="prefetch" href="/assets/js/19.ceb58237.js"><link rel="prefetch" href="/assets/js/20.e8901ef0.js"><link rel="prefetch" href="/assets/js/21.2f1ef1ed.js"><link rel="prefetch" href="/assets/js/22.fe9da161.js"><link rel="prefetch" href="/assets/js/23.e71c0389.js"><link rel="prefetch" href="/assets/js/24.28901214.js"><link rel="prefetch" href="/assets/js/25.20e2c170.js"><link rel="prefetch" href="/assets/js/26.b0d0aa15.js"><link rel="prefetch" href="/assets/js/27.f584bbbd.js"><link rel="prefetch" href="/assets/js/28.f6cf037f.js"><link rel="prefetch" href="/assets/js/29.df094055.js"><link rel="prefetch" href="/assets/js/30.89f41eda.js"><link rel="prefetch" href="/assets/js/31.23cd5f38.js"><link rel="prefetch" href="/assets/js/32.c220272a.js"><link rel="prefetch" href="/assets/js/33.7ad1d561.js"><link rel="prefetch" href="/assets/js/34.c006c475.js"><link rel="prefetch" href="/assets/js/35.6aa19e26.js"><link rel="prefetch" href="/assets/js/36.9d783b9b.js"><link rel="prefetch" href="/assets/js/37.d0727512.js"><link rel="prefetch" href="/assets/js/38.f01fa937.js"><link rel="prefetch" href="/assets/js/39.d15a676e.js"><link rel="prefetch" href="/assets/js/4.bb14e94a.js"><link rel="prefetch" href="/assets/js/40.0ed554a6.js"><link rel="prefetch" href="/assets/js/41.9d49780f.js"><link rel="prefetch" href="/assets/js/42.d92279d7.js"><link rel="prefetch" href="/assets/js/43.01a388c2.js"><link rel="prefetch" href="/assets/js/44.c7584936.js"><link rel="prefetch" href="/assets/js/45.17d7184f.js"><link rel="prefetch" href="/assets/js/46.5bdcbe89.js"><link rel="prefetch" href="/assets/js/47.4f20bd6a.js"><link rel="prefetch" href="/assets/js/48.c9938e88.js"><link rel="prefetch" href="/assets/js/49.258ce5ff.js"><link rel="prefetch" href="/assets/js/5.b4108c8c.js"><link rel="prefetch" href="/assets/js/50.b49c0e5f.js"><link rel="prefetch" href="/assets/js/51.704490cb.js"><link rel="prefetch" href="/assets/js/52.c001996b.js"><link rel="prefetch" href="/assets/js/53.b9df439f.js"><link rel="prefetch" href="/assets/js/54.ec8900e7.js"><link rel="prefetch" href="/assets/js/55.36cc3657.js"><link rel="prefetch" href="/assets/js/56.ad84c447.js"><link rel="prefetch" href="/assets/js/57.e09879cd.js"><link rel="prefetch" href="/assets/js/58.e7196459.js"><link rel="prefetch" href="/assets/js/59.03f7796f.js"><link rel="prefetch" href="/assets/js/6.81c603ab.js"><link rel="prefetch" href="/assets/js/60.abc20cd5.js"><link rel="prefetch" href="/assets/js/61.5b2cff23.js"><link rel="prefetch" href="/assets/js/62.433b91d3.js"><link rel="prefetch" href="/assets/js/63.aaa41473.js"><link rel="prefetch" href="/assets/js/64.f6c1d4d0.js"><link rel="prefetch" href="/assets/js/65.f18a4ca3.js"><link rel="prefetch" href="/assets/js/66.06e85923.js"><link rel="prefetch" href="/assets/js/67.d7708639.js"><link rel="prefetch" href="/assets/js/68.d415d48b.js"><link rel="prefetch" href="/assets/js/69.90861f6e.js"><link rel="prefetch" href="/assets/js/70.a2e49e7c.js"><link rel="prefetch" href="/assets/js/71.7eb01aa4.js"><link rel="prefetch" href="/assets/js/72.a92e96b8.js"><link rel="prefetch" href="/assets/js/73.062e35c9.js"><link rel="prefetch" href="/assets/js/74.923637d2.js"><link rel="prefetch" href="/assets/js/75.549cdb95.js"><link rel="prefetch" href="/assets/js/76.4bacb215.js"><link rel="prefetch" href="/assets/js/77.4e67cd30.js"><link rel="prefetch" href="/assets/js/78.26059276.js"><link rel="prefetch" href="/assets/js/79.2a0e52eb.js"><link rel="prefetch" href="/assets/js/80.044db4e0.js"><link rel="prefetch" href="/assets/js/81.dcd0b2b7.js"><link rel="prefetch" href="/assets/js/82.82b21be5.js"><link rel="prefetch" href="/assets/js/83.5f668949.js"><link rel="prefetch" href="/assets/js/84.adb4a6dc.js"><link rel="prefetch" href="/assets/js/85.dd97ea5f.js"><link rel="prefetch" href="/assets/js/86.778e76c5.js"><link rel="prefetch" href="/assets/js/87.d0ed221a.js"><link rel="prefetch" href="/assets/js/88.0e2c8b76.js"><link rel="prefetch" href="/assets/js/89.d665ec6f.js"><link rel="prefetch" href="/assets/js/9.dbd27c88.js"><link rel="prefetch" href="/assets/js/91.cd8af0f2.js"><link rel="prefetch" href="/assets/js/92.65f052a7.js"><link rel="prefetch" href="/assets/js/93.3c2924a5.js"><link rel="prefetch" href="/assets/js/94.5ff84856.js"><link rel="prefetch" href="/assets/js/95.b42dbe9e.js"><link rel="prefetch" href="/assets/js/96.f43555c8.js"><link rel="prefetch" href="/assets/js/97.f1710a9c.js"><link rel="prefetch" href="/assets/js/98.5492779f.js"><link rel="prefetch" href="/assets/js/99.6cca498d.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.c145e1d0.js">
    <link rel="stylesheet" href="/assets/css/0.styles.d30c10eb.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu have-body-img"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/logo.png" alt="YAN" class="logo"> <span class="site-name can-hide">YAN</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="知识库" class="dropdown-title"><a href="/knowledge/" class="link-title">知识库</a> <span class="title" style="display:none;">知识库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/java/" class="nav-link">JAVA</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="学习" class="dropdown-title"><a href="/study/" class="link-title">学习</a> <span class="title" style="display:none;">学习</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/h5/" class="nav-link">H5</a></li></ul></div></div><div class="nav-item"><a href="/about/" class="nav-link">关于</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><!----> <span class="title" style="display:;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div> <a href="https://github.com/chansanya" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="/img/heard.png"> <div class="blogger-info"><h3>产彡</h3> <span>半夜偷偷卷</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="知识库" class="dropdown-title"><a href="/knowledge/" class="link-title">知识库</a> <span class="title" style="display:none;">知识库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/java/" class="nav-link">JAVA</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="学习" class="dropdown-title"><a href="/study/" class="link-title">学习</a> <span class="title" style="display:none;">学习</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/h5/" class="nav-link">H5</a></li></ul></div></div><div class="nav-item"><a href="/about/" class="nav-link">关于</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><!----> <span class="title" style="display:;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div> <a href="https://github.com/chansanya" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>java</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>linux</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>docker</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>redis</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>nginx</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>mysql</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/7415da/" class="sidebar-link">MySql常用命令</a></li><li><a href="/pages/737f83/" class="sidebar-link">修改MySql加密方式</a></li><li><a href="/pages/2e1c59/" class="sidebar-link">Myshell常用函数</a></li><li><a href="/pages/c8843c/" aria-current="page" class="active sidebar-link">MySQL分区</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/pages/c8843c/#概念" class="sidebar-link">概念</a></li><li class="sidebar-sub-header level2"><a href="/pages/c8843c/#分区类型" class="sidebar-link">分区类型</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/c8843c/#range分区" class="sidebar-link">RANGE分区</a></li><li class="sidebar-sub-header level4"><a href="/pages/c8843c/#range" class="sidebar-link">RANGE</a></li><li class="sidebar-sub-header level5"><a href="/pages/c8843c/#建表语法" class="sidebar-link">建表语法</a></li><li class="sidebar-sub-header level4"><a href="/pages/c8843c/#range-columns" class="sidebar-link">RANGE COLUMNS:</a></li><li class="sidebar-sub-header level5"><a href="/pages/c8843c/#建表语法-2" class="sidebar-link">建表语法</a></li><li class="sidebar-sub-header level3"><a href="/pages/c8843c/#" class="sidebar-link"></a></li><li class="sidebar-sub-header level4"><a href="/pages/c8843c/#操作分区" class="sidebar-link">操作分区</a></li><li class="sidebar-sub-header level3"><a href="/pages/c8843c/#list" class="sidebar-link">LIST</a></li><li class="sidebar-sub-header level4"><a href="/pages/c8843c/#list-2" class="sidebar-link">LIST</a></li><li class="sidebar-sub-header level5"><a href="/pages/c8843c/#建表语法-3" class="sidebar-link">建表语法</a></li><li class="sidebar-sub-header level5"><a href="/pages/c8843c/#list-columns" class="sidebar-link">~~LIST COLUMNS~~</a></li><li class="sidebar-sub-header level4"><a href="/pages/c8843c/#操作分区-2" class="sidebar-link">操作分区</a></li><li class="sidebar-sub-header level3"><a href="/pages/c8843c/#hash" class="sidebar-link">HASH</a></li><li class="sidebar-sub-header level4"><a href="/pages/c8843c/#hash-2" class="sidebar-link">HASH</a></li><li class="sidebar-sub-header level4"><a href="/pages/c8843c/#linear-hash" class="sidebar-link">~~LINEAR HASH~~</a></li><li class="sidebar-sub-header level4"><a href="/pages/c8843c/#-2" class="sidebar-link"></a></li><li class="sidebar-sub-header level4"><a href="/pages/c8843c/#操作分区-3" class="sidebar-link">操作分区</a></li><li class="sidebar-sub-header level3"><a href="/pages/c8843c/#-3" class="sidebar-link"></a></li><li class="sidebar-sub-header level3"><a href="/pages/c8843c/#key" class="sidebar-link">KEY</a></li><li class="sidebar-sub-header level4"><a href="/pages/c8843c/#key-2" class="sidebar-link">KEY</a></li><li class="sidebar-sub-header level4"><a href="/pages/c8843c/#linear-key" class="sidebar-link">~~LINEAR KEY~~</a></li><li class="sidebar-sub-header level4"><a href="/pages/c8843c/#操作分区-4" class="sidebar-link">操作分区</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/c8843c/#-4" class="sidebar-link"></a></li><li class="sidebar-sub-header level2"><a href="/pages/c8843c/#子分区" class="sidebar-link">子分区</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/c8843c/#操作子分区" class="sidebar-link">操作子分区</a></li><li class="sidebar-sub-header level4"><a href="/pages/c8843c/#合并子分区" class="sidebar-link">合并子分区</a></li><li class="sidebar-sub-header level4"><a href="/pages/c8843c/#拆分子分区" class="sidebar-link">拆分子分区</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/c8843c/#-5" class="sidebar-link"></a></li><li class="sidebar-sub-header level2"><a href="/pages/c8843c/#查看分区信息" class="sidebar-link">查看分区信息</a></li><li class="sidebar-sub-header level2"><a href="/pages/c8843c/#移除分区表的定义" class="sidebar-link">移除分区表的定义</a></li><li class="sidebar-sub-header level2"><a href="/pages/c8843c/#注意事项" class="sidebar-link">注意事项</a></li><li class="sidebar-sub-header level2"><a href="/pages/c8843c/#参考资料" class="sidebar-link">参考资料</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/c8843c/#指定子分区路径" class="sidebar-link">指定子分区路径</a></li><li class="sidebar-sub-header level3"><a href="/pages/c8843c/#-6" class="sidebar-link"></a></li></ul></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>其他</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><a href="/knowledge/#知识库" data-v-06225672>知识库</a></li><li data-v-06225672><a href="/knowledge/#mysql" data-v-06225672>mysql</a></li></ul> <div class="info" data-v-06225672><div title="作者" class="author iconfont icon-touxiang" data-v-06225672><a href="https://github.com/chansanya" target="_blank" title="作者" class="beLink" data-v-06225672>Yan</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2023-03-12</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABH1JREFUSA3tVl1oHFUUPmdmd2ltklqbpJDiNnXFmgbFktho7YMPNiJSSZM0+CAYSkUELVhM6YuwIPpgoOKDqOBDC0XE2CQoNtQXBUFTTcCi+Wlh1V2TQExsUzcltd3M9Tt3ZjZzZ2fT+OJTL8yeM+eee757fmeJbq//KQL8X3DUSFOcfr7cRsRtxNQMWueeVzOkaITIGqQHNg5y8+jNW9ldM7A6nTpAjuolUikAwq7CE3WcM2RRDz+XGVgN3FptU/aUSlvq9Pa3iZ1+sgAqJyyAFqkipd9dqiwHF3P65YycLWc/6sqGrvoEoIp6DOFaX5h6+dnfjkWprwqsPk0dUGq5vySwDImC10KxFHgGL1SWoc92O3eVht09qdXNH11I2SsTsJYqMWzihqGMi+A+Garf3BAuuLI5oGlULyNfyB/HYNujwktOfRrMr5t77NmevqaUopx0grnKAyvVpmwUDB4x6FPXuGvYLTDwWsejwgtgkYKPqRJg8SV6xaiZ3ZTppGneS4yfH5/66fZSDHv+QZci/+h5c5UHtpy67JUqGppM0sh0Nc1dW6/N1W5Yoqat8/TU/VnadmdeW2PLLSyh0cvxBs3KbqTmwYPpxN4do/mzE8nEpvX/UMu2Wbp74zUAK5q6WkHns7V0eWkdPbPzd3rxkTGybadYySumVzhcaJFbs5UrEkQ/+CK8gF5dnh/6ciIZ73gwQ927L1IitoxKLXYP3SjYdOrHHfTZhRRlFyrorafPk20B3HPD1y2G3qKZME5Jcf3t/HUC13/8tSd++vqFveMUTwAUxSUFI1QekR1+bIze3D9MF2aq6cPvG72CgnldWCFqyRw3lwH8ZMerjTD9ElRO7Gv44wNpC90aASqGfVlz/Rx17srQ57/UU26hkhQqUB7dBR71WmzQhHUnblGmVOEw0jhbV1n9OlXUDCIRGaNV5Jp43N516fN7JmnTHdfp7Hgy0luO4aMhtkLL8Bi3bUWYvzh5Mn1dTxrL6QmGuRhGL/TiTTxRoEdTszSaq9GR0NGA3KdkOz3hqSV3MIDhQ5IVX/Ivx3umBti2es2h4eZby7x8br1rkf7Mo90AqC8aQ3sJeNzqFRu+vSANAQe3PL7l0HGOAdwDCeZYvNKeoZp1Qfs6Aipndh86HmFRi0LAnEO47wsqM6cdfjh3jBPUzhZy7nvlUfFsamED1VQt6aISHVymXZ/B2aCtIG8AI8xfobj2d3en1wWVhOeHELKmLQ1s211s88comkv4UCwWyF787mJdYXtNfhKAXVqnKTq8QZvGAGGOfaTo5pGZ/PwbUCr5+DPr/1J92JNHr9aOl/F3iI5+O1nfybsGxoimvZ3ViWSluDITw3P37mypheDIPY0tw7+O/5ApbkYw+zpfaUVu32Pi98+defdUhEpZkRFq0aqyNh9FuL9hpYbEm6iwi0z2REd09ZmyENEbuhjDWzKvZXTqKYaBIr3tt5kuPtQBZFvEUwHt60vfCNu41XsksH9Ij1BMMz1Y0OOunHNShFIP5868g5zeXmuLwL9T4b6Q2+KejgAAAABJRU5ErkJggg==">MySQL分区<!----></h1> <!----> <div class="theme-vdoing-content content__default"><h2 id="概念"><a href="#概念" class="header-anchor">#</a> 概念</h2> <p>分区是指根据一定的规则将一个大表分解成多个更小的部分，这里的规则一般就是利用分区规则将表进行水平切分；</p> <p>逻辑上没有发生变化但实际上表已经被拆分成了多个物理对象，每个分成被划分成了一个独立的对象。</p> <p>相对于没有分区的当个表而言分区的表有很多的优势包括： 并发统计查询、快速归档删除分区数据、分散存储、查询性能更佳。</p> <p>mysql5.7以后查询语句支持指定分区例如：</p> <p><code>SELECT * FROM t PARTITION (p0,p1) WHERE c &lt; 5</code></p> <p>指定分区同样适用<code>DELETE</code>,<code>INSERT</code>,<code>REPLACE</code>,<code>UPDATE</code>, and<code>LOAD DATA</code>,<code>LOAD XML</code>.</p> <h2 id="分区类型"><a href="#分区类型" class="header-anchor">#</a> 分区类型</h2> <h3 id="range分区"><a href="#range分区" class="header-anchor">#</a> RANGE分区</h3> <ul><li>基于一个给定的连续区间范围，RANGE主要是基于整数的分区，对于非整形的字段需要利用表达式将其转换成整形。</li> <li>分区连续不能重复</li></ul> <h4 id="range"><a href="#range" class="header-anchor">#</a> RANGE</h4> <h5 id="建表语法"><a href="#建表语法" class="header-anchor">#</a> 建表语法</h5> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> partition_test_table <span class="token punctuation">(</span>
      id_card <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span>  <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'身份证'</span><span class="token punctuation">,</span>
      name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">)</span>  <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'名字'</span><span class="token punctuation">,</span>
      sex <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'性别'</span><span class="token punctuation">,</span>
      profession_id <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'职业ID'</span><span class="token punctuation">,</span>
      birthday <span class="token keyword">datetime</span>  <span class="token keyword">DEFAULT</span> <span class="token keyword">CURRENT_TIMESTAMP</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'生日'</span><span class="token punctuation">,</span>
      version <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>  <span class="token keyword">DEFAULT</span> <span class="token number">0</span>  <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'版本'</span><span class="token punctuation">,</span>
      logic_state <span class="token keyword">datetime</span>  <span class="token keyword">DEFAULT</span> <span class="token keyword">CURRENT_TIMESTAMP</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'逻辑状态'</span><span class="token punctuation">,</span>
      <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span>id_card<span class="token punctuation">,</span>logic_state<span class="token punctuation">,</span>profession_id<span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token keyword">KEY</span> INDEX_NAME <span class="token punctuation">(</span>name<span class="token punctuation">)</span>
<span class="token punctuation">)</span> <span class="token keyword">ENGINE</span> <span class="token operator">=</span> <span class="token keyword">InnoDB</span> <span class="token keyword">AUTO_INCREMENT</span> <span class="token operator">=</span> <span class="token number">0</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">CHARSET</span> <span class="token operator">=</span> utf8 <span class="token keyword">COMMENT</span> <span class="token operator">=</span> <span class="token string">'range分区测试表'</span>
    <span class="token keyword">partition</span> <span class="token keyword">by</span> range  <span class="token punctuation">(</span>profession_id<span class="token punctuation">)</span> <span class="token punctuation">(</span>
        <span class="token keyword">PARTITION</span> JOB1 <span class="token keyword">VALUES</span> LESS THAN <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">ENGINE</span> <span class="token operator">=</span> <span class="token keyword">InnoDB</span><span class="token punctuation">,</span>
        <span class="token keyword">PARTITION</span> JOB2 <span class="token keyword">VALUES</span> LESS THAN <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">ENGINE</span> <span class="token operator">=</span> <span class="token keyword">InnoDB</span><span class="token punctuation">,</span>
        <span class="token keyword">PARTITION</span> JOB3 <span class="token keyword">VALUES</span> LESS THAN <span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token keyword">ENGINE</span> <span class="token operator">=</span> <span class="token keyword">InnoDB</span><span class="token punctuation">,</span>
        <span class="token keyword">partition</span> JOB_OTHER <span class="token keyword">values</span> less than maxvalue
        <span class="token punctuation">)</span> <span class="token punctuation">;</span>
</code></pre></div><h4 id="range-columns"><a href="#range-columns" class="header-anchor">#</a> RANGE COLUMNS:</h4> <h5 id="建表语法-2"><a href="#建表语法-2" class="header-anchor">#</a> 建表语法</h5> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> partition_test_table <span class="token punctuation">(</span>
     id <span class="token keyword">bigint</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span>  <span class="token keyword">AUTO_INCREMENT</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'自增ID'</span><span class="token punctuation">,</span>
     log_type <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">)</span>  <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'日志类型'</span><span class="token punctuation">,</span>
     log_content <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'日志类型'</span><span class="token punctuation">,</span>
     log_time <span class="token keyword">datetime</span>  <span class="token keyword">DEFAULT</span> <span class="token keyword">CURRENT_TIMESTAMP</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'日志发生时间'</span><span class="token punctuation">,</span>
     <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span>id<span class="token punctuation">,</span>log_time<span class="token punctuation">)</span><span class="token punctuation">,</span>
     <span class="token keyword">KEY</span> INDEX_NAME <span class="token punctuation">(</span>log_time<span class="token punctuation">)</span>
<span class="token punctuation">)</span> <span class="token keyword">ENGINE</span> <span class="token operator">=</span> <span class="token keyword">InnoDB</span> <span class="token keyword">AUTO_INCREMENT</span> <span class="token operator">=</span> <span class="token number">0</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">CHARSET</span> <span class="token operator">=</span> utf8 <span class="token keyword">COMMENT</span> <span class="token operator">=</span> <span class="token string">'模块监控记录'</span>
    <span class="token keyword">partition</span> <span class="token keyword">by</span> range <span class="token keyword">columns</span> <span class="token punctuation">(</span>log_time<span class="token punctuation">)</span> <span class="token punctuation">(</span>
        <span class="token keyword">PARTITION</span> P20210501 <span class="token keyword">VALUES</span> LESS THAN <span class="token punctuation">(</span><span class="token string">'2021-05-01'</span><span class="token punctuation">)</span> <span class="token keyword">ENGINE</span> <span class="token operator">=</span> <span class="token keyword">InnoDB</span><span class="token punctuation">,</span>
        <span class="token keyword">PARTITION</span> P20210601 <span class="token keyword">VALUES</span> LESS THAN <span class="token punctuation">(</span><span class="token string">'2021-06-01'</span><span class="token punctuation">)</span> <span class="token keyword">ENGINE</span> <span class="token operator">=</span> <span class="token keyword">InnoDB</span><span class="token punctuation">,</span>
        <span class="token keyword">PARTITION</span> P20210701 <span class="token keyword">VALUES</span> LESS THAN <span class="token punctuation">(</span><span class="token string">'2021-07-01'</span><span class="token punctuation">)</span> <span class="token keyword">ENGINE</span> <span class="token operator">=</span> <span class="token keyword">InnoDB</span>
        <span class="token punctuation">)</span> <span class="token punctuation">;</span>
</code></pre></div><h3 id=""><a href="#" class="header-anchor">#</a></h3> <h4 id="操作分区"><a href="#操作分区" class="header-anchor">#</a> 操作分区</h4> <ul><li><strong>拥有partition JOB_OTHER values less than maxvalue 的表,不能新增分区</strong></li> <li><strong>新增分区列必须大于现有分区</strong></li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">#新增分区</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> 表名 <span class="token keyword">ADD</span> <span class="token keyword">PARTITION</span> <span class="token punctuation">(</span><span class="token keyword">PARTITION</span> 分区名 <span class="token keyword">VALUES</span> LESS THAN <span class="token punctuation">(</span><span class="token number">20100403</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">#设置分区最大上限</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> 表名 <span class="token keyword">add</span> <span class="token keyword">PARTITION</span>  <span class="token punctuation">(</span><span class="token keyword">PARTITION</span> 分区名 <span class="token keyword">VALUES</span> LESS THAN MAXVALUE<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">#拆分分区 ,拆分的值必须严格按照 value值的顺序</span>
<span class="token comment">#拆分分区不能改变原有分区范围，除非是最后一个分区</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> 表名 REORGANIZE <span class="token keyword">PARTITION</span> 分区名 <span class="token keyword">INTO</span> <span class="token punctuation">(</span>
    <span class="token keyword">PARTITION</span> 拆分后分区<span class="token number">1</span> <span class="token keyword">VALUES</span> LESS THAN <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">PARTITION</span> 拆分后分区<span class="token number">2</span> <span class="token keyword">VALUES</span> LESS THAN <span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">#删除分区 并删除数据</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> 表名 <span class="token keyword">DROP</span> <span class="token keyword">PARTITION</span> 分区名

<span class="token comment">#移除表分区的定义，不删除数据</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> 表名 REMOVE PARTITIONING <span class="token punctuation">;</span>
</code></pre></div><h3 id="list"><a href="#list" class="header-anchor">#</a> LIST</h3> <ul><li>类似于按RANGE分区，区别在于LIST分区是基于列值匹配一个离散值集合中的某个值来进行选择。</li> <li>LIST是枚举值列表的集合</li> <li>LIST分区列是非null列，否则插入null值如果枚举列表里面不存在null值会插入失败</li></ul> <h4 id="list-2"><a href="#list-2" class="header-anchor">#</a> LIST</h4> <h5 id="建表语法-3"><a href="#建表语法-3" class="header-anchor">#</a> 建表语法</h5> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">table</span>  partition_test_table<span class="token punctuation">(</span>
    id <span class="token keyword">int</span> <span class="token keyword">AUTO_INCREMENT</span> <span class="token keyword">COMMENT</span> <span class="token string">'ID'</span><span class="token punctuation">,</span>
		id_card	<span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span>  <span class="token keyword">COMMENT</span> <span class="token string">'身份证'</span><span class="token punctuation">,</span>
	  user_name	<span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">)</span>  <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'名字'</span><span class="token punctuation">,</span>
	  sex <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'性别'</span><span class="token punctuation">,</span>
    lv  <span class="token keyword">int</span>  <span class="token keyword">COMMENT</span> <span class="token string">'级别'</span><span class="token punctuation">,</span>
		<span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span>id<span class="token punctuation">,</span>lv<span class="token punctuation">)</span>
<span class="token punctuation">)</span> <span class="token keyword">partition</span> <span class="token keyword">by</span> LIST <span class="token punctuation">(</span>lv<span class="token punctuation">)</span><span class="token punctuation">(</span>
    <span class="token keyword">partition</span> lv1 <span class="token keyword">values</span> <span class="token operator">in</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token keyword">partition</span> lv2 <span class="token keyword">values</span> <span class="token operator">in</span> <span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token keyword">partition</span> lv3 <span class="token keyword">values</span> <span class="token operator">in</span> <span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h5 id="list-columns"><a href="#list-columns" class="header-anchor">#</a> <s>LIST COLUMNS</s></h5> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">table</span>  partition_test_table<span class="token punctuation">(</span>
    id <span class="token keyword">int</span> <span class="token keyword">AUTO_INCREMENT</span> <span class="token keyword">COMMENT</span> <span class="token string">'ID'</span><span class="token punctuation">,</span>
		id_card	<span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span>  <span class="token keyword">COMMENT</span> <span class="token string">'身份证'</span><span class="token punctuation">,</span>
	  user_name	<span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">)</span>  <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'名字'</span><span class="token punctuation">,</span>
	  sex <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'性别'</span><span class="token punctuation">,</span>
    lv  <span class="token keyword">int</span>  <span class="token keyword">COMMENT</span> <span class="token string">'级别'</span><span class="token punctuation">,</span>
		<span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span>id<span class="token punctuation">,</span>lv<span class="token punctuation">)</span>
<span class="token punctuation">)</span> <span class="token keyword">partition</span> <span class="token keyword">by</span> LIST <span class="token keyword">columns</span><span class="token punctuation">(</span>lv<span class="token punctuation">)</span><span class="token punctuation">(</span>
    <span class="token keyword">partition</span> lv1 <span class="token keyword">values</span> <span class="token operator">in</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token keyword">partition</span> lv2 <span class="token keyword">values</span> <span class="token operator">in</span> <span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token keyword">partition</span> lv3 <span class="token keyword">values</span> <span class="token operator">in</span> <span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="操作分区-2"><a href="#操作分区-2" class="header-anchor">#</a> 操作分区</h4> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">#新增分区</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> 表名 <span class="token keyword">ADD</span> <span class="token keyword">PARTITION</span> <span class="token punctuation">(</span><span class="token keyword">PARTITION</span> lv4 <span class="token keyword">VALUES</span>  <span class="token operator">IN</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">#拆分分区</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> 表名 REORGANIZE <span class="token keyword">PARTITION</span>  现有分区<span class="token number">1</span><span class="token punctuation">,</span>现有分区<span class="token number">2</span> <span class="token keyword">INTO</span>  
<span class="token punctuation">(</span><span class="token keyword">PARTITION</span> 拆分后分区<span class="token number">1</span> <span class="token keyword">VALUES</span> <span class="token operator">IN</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">PARTITION</span> 拆分后分区<span class="token number">2</span> <span class="token keyword">VALUES</span> <span class="token operator">IN</span> <span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">#合并分区</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> 表名 REORGANIZE <span class="token keyword">PARTITION</span>  现有分区<span class="token number">1</span><span class="token punctuation">,</span>现有分区<span class="token number">2</span> 
<span class="token keyword">INTO</span> <span class="token punctuation">(</span><span class="token keyword">PARTITION</span> 合并后的分区 <span class="token keyword">VALUES</span> <span class="token operator">IN</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">)</span>


</code></pre></div><h3 id="hash"><a href="#hash" class="header-anchor">#</a> HASH</h3> <ul><li>基于用户定义的表达式的返回值来进行选择的分区</li> <li>基于给定的分区个数，将数据分配到不同的分区,</li> <li>HASH分区只能针对整数进行HASH，对于非整形的字段只能通过表达式将其转换成整数</li></ul> <h4 id="hash-2"><a href="#hash-2" class="header-anchor">#</a> HASH</h4> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> partition_test_table <span class="token punctuation">(</span>
    id <span class="token keyword">INT</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
    hired <span class="token keyword">DATE</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token string">'1970-01-01'</span>
<span class="token punctuation">)</span>
<span class="token keyword">PARTITION</span> <span class="token keyword">BY</span>  <span class="token keyword">HASH</span><span class="token punctuation">(</span> <span class="token keyword">YEAR</span><span class="token punctuation">(</span>hired<span class="token punctuation">)</span> <span class="token punctuation">)</span>
PARTITIONS <span class="token number">6</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="linear-hash"><a href="#linear-hash" class="header-anchor">#</a> <s>LINEAR HASH</s></h4> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> partition_test_table <span class="token punctuation">(</span>
    id <span class="token keyword">INT</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
    hired <span class="token keyword">DATE</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token string">'1970-01-01'</span>
<span class="token punctuation">)</span>
<span class="token keyword">PARTITION</span> <span class="token keyword">BY</span>  LINEAR <span class="token keyword">HASH</span><span class="token punctuation">(</span> <span class="token keyword">YEAR</span><span class="token punctuation">(</span>hired<span class="token punctuation">)</span> <span class="token punctuation">)</span>
PARTITIONS <span class="token number">6</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="-2"><a href="#-2" class="header-anchor">#</a></h4> <h4 id="操作分区-3"><a href="#操作分区-3" class="header-anchor">#</a> 操作分区</h4> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">#合并删除分区</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> 表名 <span class="token keyword">COALESCE</span> <span class="token keyword">PARTITION</span> <span class="token number">3</span><span class="token punctuation">;</span>
<span class="token comment">#增加分区</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> 表名 <span class="token keyword">add</span> <span class="token keyword">PARTITION</span> partitions <span class="token number">4</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="-3"><a href="#-3" class="header-anchor">#</a></h3> <h3 id="key"><a href="#key" class="header-anchor">#</a> KEY</h3> <ul><li>KEY分区支持除text和BLOB之外的所有数据类型的分区</li> <li>KEY分区不允许使用用户自定义的表达式进行分区，KEY分区使用系统提供的HASH函数进行分区</li> <li>表中存在主键或者唯一键时，如果创建key分区时没有指定字段系统默认会首选主键列作为分区字列,如果不存在主键列会选择非空唯一键列作为分区列,注意唯一列作为分区列唯一列不能为null。</li></ul> <h4 id="key-2"><a href="#key-2" class="header-anchor">#</a> KEY</h4> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> partition_test_table <span class="token punctuation">(</span>
    id <span class="token keyword">INT</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
    var <span class="token keyword">CHAR</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>
<span class="token keyword">PARTITION</span> <span class="token keyword">BY</span>  <span class="token keyword">KEY</span> <span class="token punctuation">(</span>var<span class="token punctuation">)</span>
PARTITIONS <span class="token number">3</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="linear-key"><a href="#linear-key" class="header-anchor">#</a> <s>LINEAR KEY</s></h4> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> partition_test_table <span class="token punctuation">(</span>
    id <span class="token keyword">INT</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
    var <span class="token keyword">CHAR</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>
<span class="token keyword">PARTITION</span> <span class="token keyword">BY</span> LINEAR <span class="token keyword">KEY</span> <span class="token punctuation">(</span>var<span class="token punctuation">)</span>
PARTITIONS <span class="token number">3</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="操作分区-4"><a href="#操作分区-4" class="header-anchor">#</a> 操作分区</h4> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">#合并删除分区</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> 表名 <span class="token keyword">COALESCE</span> <span class="token keyword">PARTITION</span> <span class="token number">3</span><span class="token punctuation">;</span>
<span class="token comment">#增加分区</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> 表名 <span class="token keyword">add</span> <span class="token keyword">PARTITION</span> partitions <span class="token number">4</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="-4"><a href="#-4" class="header-anchor">#</a></h2> <h2 id="子分区"><a href="#子分区" class="header-anchor">#</a> 子分区</h2> <p>•对每个分区表的每个分区进行再次分隔，
•目前只有RANGE和LIST分区的表可以再进行子分区，子分区只能是HASH或者KEY分区。
•子分区可以将原本的数据进行再次的分区划分。</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">#不定义每个子分区子分区的名字和路径由分区决定</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> partition_test_table <span class="token punctuation">(</span>id <span class="token keyword">INT</span><span class="token punctuation">,</span> purchased <span class="token keyword">DATE</span><span class="token punctuation">)</span>
    <span class="token keyword">PARTITION</span> <span class="token keyword">BY</span> RANGE<span class="token punctuation">(</span> <span class="token keyword">YEAR</span><span class="token punctuation">(</span>purchased<span class="token punctuation">)</span> <span class="token punctuation">)</span>
    SUBPARTITION <span class="token keyword">BY</span> <span class="token keyword">HASH</span><span class="token punctuation">(</span> TO_DAYS<span class="token punctuation">(</span>purchased<span class="token punctuation">)</span> <span class="token punctuation">)</span>
    SUBPARTITIONS <span class="token number">2</span> <span class="token punctuation">(</span>
        <span class="token keyword">PARTITION</span> p0 <span class="token keyword">VALUES</span> LESS THAN <span class="token punctuation">(</span><span class="token number">1990</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token keyword">PARTITION</span> p1 <span class="token keyword">VALUES</span> LESS THAN <span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token keyword">PARTITION</span> p2 <span class="token keyword">VALUES</span> LESS THAN MAXVALUE
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
    
 <span class="token comment">#定义每个子分区的分区名和各自的路径</span>
 <span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> partition_test_table <span class="token punctuation">(</span>id <span class="token keyword">INT</span><span class="token punctuation">,</span> purchased <span class="token keyword">DATE</span><span class="token punctuation">)</span>
    <span class="token keyword">PARTITION</span> <span class="token keyword">BY</span> RANGE<span class="token punctuation">(</span> <span class="token keyword">YEAR</span><span class="token punctuation">(</span>purchased<span class="token punctuation">)</span> <span class="token punctuation">)</span>
    SUBPARTITION <span class="token keyword">BY</span> <span class="token keyword">HASH</span><span class="token punctuation">(</span> TO_DAYS<span class="token punctuation">(</span>purchased<span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">(</span>
        <span class="token keyword">PARTITION</span> p0 <span class="token keyword">VALUES</span> LESS THAN <span class="token punctuation">(</span><span class="token number">1990</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>
            SUBPARTITION s0<span class="token punctuation">,</span>
            SUBPARTITION s1
        <span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token keyword">PARTITION</span> p1 <span class="token keyword">VALUES</span> LESS THAN <span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>
            SUBPARTITION s2<span class="token punctuation">,</span>
            SUBPARTITION s3
        <span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token keyword">PARTITION</span> p2 <span class="token keyword">VALUES</span> LESS THAN MAXVALUE <span class="token punctuation">(</span>
            SUBPARTITION s4<span class="token punctuation">,</span>
            SUBPARTITION s5
        <span class="token punctuation">)</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
 
</code></pre></div><h3 id="操作子分区"><a href="#操作子分区" class="header-anchor">#</a> 操作子分区</h3> <p>•合并分区的子分区也必须等于创建是数量，因为必须和创建分区时每个分区只有两个子分区保持一致，
合并分区不会造成数据的丢失 拆分同理。</p> <h4 id="合并子分区"><a href="#合并子分区" class="header-anchor">#</a> 合并子分区</h4> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> 表名 REORGANIZE <span class="token keyword">PARTITION</span> p0<span class="token punctuation">,</span>p1 <span class="token keyword">INTO</span> <span class="token punctuation">(</span>
    <span class="token keyword">PARTITION</span> m1 <span class="token keyword">VALUES</span> LESS THAN <span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">)</span>
    <span class="token punctuation">(</span> SUBPARTITION n0<span class="token punctuation">,</span>
      SUBPARTITION n1
     <span class="token punctuation">)</span> 
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="拆分子分区"><a href="#拆分子分区" class="header-anchor">#</a> 拆分子分区</h4> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> 表名 REORGANIZE <span class="token keyword">PARTITION</span> m1 <span class="token keyword">INTO</span> <span class="token punctuation">(</span>
     <span class="token keyword">PARTITION</span> p0 <span class="token keyword">VALUES</span> LESS THAN <span class="token punctuation">(</span><span class="token number">1990</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>
            SUBPARTITION s0<span class="token punctuation">,</span>
            SUBPARTITION s1
        <span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token keyword">PARTITION</span> p1 <span class="token keyword">VALUES</span> LESS THAN <span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>
            SUBPARTITION s2<span class="token punctuation">,</span>
            SUBPARTITION s3
        <span class="token punctuation">)</span>
    
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="-5"><a href="#-5" class="header-anchor">#</a></h2> <h2 id="查看分区信息"><a href="#查看分区信息" class="header-anchor">#</a> 查看分区信息</h2> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment"># 查看分区</span>
<span class="token keyword">SELECT</span> PARTITION_NAME<span class="token punctuation">,</span>PARTITION_DESCRIPTION<span class="token punctuation">,</span>TABLE_ROWS <span class="token keyword">FROM</span> INFORMATION_SCHEMA<span class="token punctuation">.</span>PARTITIONS <span class="token keyword">WHERE</span> TABLE_NAME <span class="token operator">=</span> <span class="token string">'表名'</span><span class="token punctuation">;</span>

<span class="token comment"># 查看分区 包含子分区</span>
<span class="token keyword">SELECT</span> PARTITION_NAME<span class="token punctuation">,</span>PARTITION_EXPRESSION<span class="token punctuation">,</span>PARTITION_DESCRIPTION<span class="token punctuation">,</span>TABLE_ROWS<span class="token punctuation">,</span>SUBPARTITION_NAME<span class="token punctuation">,</span>SUBPARTITION_METHOD<span class="token punctuation">,</span>SUBPARTITION_EXPRESSION <span class="token keyword">FROM</span> INFORMATION_SCHEMA<span class="token punctuation">.</span>PARTITIONS <span class="token keyword">WHERE</span> TABLE_NAME <span class="token operator">=</span> <span class="token string">'partition_test_table'</span><span class="token punctuation">;</span>


<span class="token comment">#看表是不是分区表,分区表:Create_options = partitioned </span>
<span class="token keyword">show</span> <span class="token keyword">table</span> <span class="token keyword">status</span> <span class="token operator">like</span> <span class="token string">'%表名%'</span><span class="token punctuation">;</span>

<span class="token comment">#分区表 执行计划 mysql 8.0 后无需添加 partitions 关键字</span>
<span class="token keyword">explain</span> partitions <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> 表名<span class="token punctuation">;</span>


</code></pre></div><h2 id="移除分区表的定义"><a href="#移除分区表的定义" class="header-anchor">#</a> 移除分区表的定义</h2> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment"># 查看分区</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> 表名 REMOVE PARTITIONING <span class="token punctuation">;</span>
</code></pre></div><h2 id="注意事项"><a href="#注意事项" class="header-anchor">#</a> 注意事项</h2> <ul><li><strong>存在主键或者唯一键的表不能使用主键或者唯一键之外的字段作为分区字段。</strong></li> <li><strong>分区表中无法使用外键约束。</strong></li> <li>*<em>.5.7以前的版本显示分区的执行计划使用：explain PARTITIONS；5.7以后直接执行：explain*</em></li> <li><strong>注意分区名的大小写敏感问题，和关键字问题。</strong></li> <li><strong>无论哪种分区类型，要么分区表中没有主键或唯一键，要么主键或唯一键包含在分区列里面</strong></li> <li><strong>没有强制要求分区列非空，建议分区的列为NOT NULL的列；在RANGE 分区中如果往分区列中插入NULL值会被当作最小的值来处理，在LIST分区中NULL值必须在枚举列表中否则插入失败，在HASH/KEY分区中NULL值会被当作0来处理。</strong></li> <li><strong>基于时间类型的字段的转换函数mysql<strong><strong>提供了</strong></strong>YEAR(),MONTH(),DAY(),TO_DAYS(),TO_SECONDS(),WEEKDAY(),DAYOFYEAR()</strong></li> <li><strong>拆分合并分区后会导致修改的分区的统计信息失效,没有修改的分区的统计信息还在,不影响新插入的值加入到统计信息；这时需要对表执行Analyze操作.</strong></li> <li><strong>针对非整形字段进行RANG\LIST分区建议使用COLUMNS分区。</strong></li></ul> <h2 id="参考资料"><a href="#参考资料" class="header-anchor">#</a> 参考资料</h2> <h3 id="指定子分区路径"><a href="#指定子分区路径" class="header-anchor">#</a> 指定子分区路径</h3> <h3 id="-6"><a href="#-6" class="header-anchor">#</a></h3></div></div> <!----> <div class="page-edit"><!----> <!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2024/01/09, 11:02:04</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/pages/2e1c59/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">Myshell常用函数</div></a> <a href="/pages/2faec7/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">跨域</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/pages/2e1c59/" class="prev">Myshell常用函数</a></span> <span class="next"><a href="/pages/2faec7/">跨域</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/archives" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/pages/01ae5a/"><div>
            GB28181
            <!----></div></a> <span class="date">01-08</span></dt></dl><dl><dd>02</dd> <dt><a href="/pages/4eec94/"><div>
            SIP使用
            <!----></div></a> <span class="date">01-08</span></dt></dl><dl><dd>03</dd> <dt><a href="/pages/af7cf5/"><div>
            开卷
            <!----></div></a> <span class="date">12-05</span></dt></dl> <dl><dd></dd> <dt><a href="/archives" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="mailto:984038622@qq.com" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/chansanya" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://music.163.com/#/playlist?id=755597173" title="听音乐" target="_blank" class="iconfont icon-erji"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2023-2024
    <span>产彡 | <a href="https://github.com/chansanya/blog/blob/master/LICENSE" target="_blank">MIT License</a></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <div class="body-bg" style="background:url() center center / cover no-repeat;opacity:0.5;"></div> <!----> <!----></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.7d8d5d19.js" defer></script><script src="/assets/js/3.e891d935.js" defer></script><script src="/assets/js/2.df3d443c.js" defer></script><script src="/assets/js/90.3d9e2d3b.js" defer></script>
  </body>
</html>

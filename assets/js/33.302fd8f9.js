(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{337:function(t,a,e){"use strict";e.r(a);var n=e(2),s=Object(n.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h3",{attrs:{id:"threadpoolexecutor"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#threadpoolexecutor"}},[t._v("#")]),t._v(" ThreadPoolExecutor")]),t._v(" "),a("p",[t._v("线程池可执行线程数： 最大线程数 + 等待队列线程数")]),t._v(" "),a("p",[t._v("超出等待队列的线程将进入拒绝策略")]),t._v(" "),a("p",[t._v("等待队列"),a("code",[t._v("BlockingQueue")])]),t._v(" "),a("p",[a("strong",[t._v("LinkedBlockingQueue 基于链表实现")])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("public LinkedBlockingQueue(int capacity) {\n    if (capacity <= 0) throw new IllegalArgumentException();\n    this.capacity = capacity;\n    last = head = new Node<E>(null);\n}\n")])])]),a("p",[a("strong",[t._v("ArrayBlockingQueue 基于数组实现")])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("public ArrayBlockingQueue(int capacity, boolean fair) {\n    if (capacity <= 0)\n        throw new IllegalArgumentException();\n    this.items = new Object[capacity];\n    lock = new ReentrantLock(fair);\n    notEmpty = lock.newCondition();\n    notFull =  lock.newCondition();\n}\n")])])]),a("h3",{attrs:{id:"cyclicbarrier"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cyclicbarrier"}},[t._v("#")]),t._v(" CyclicBarrier")]),t._v(" "),a("p",[t._v("可循环利用的屏障,用于所有线程都等待完成后才会继续下一步行动的场景。")]),t._v(" "),a("p",[a("strong",[t._v("使用")])]),t._v(" "),a("p",[a("code",[t._v("CyclicBarrier")]),t._v(" 的构造函数如下")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CyclicBarrier")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" parties"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CyclicBarrier")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" parties"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Runnable")]),t._v(" barrierAction"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("参数代表的意思如下")]),t._v(" "),a("ul",[a("li",[t._v("parties  参与线程个数")]),t._v(" "),a("li",[t._v("barrierAction  需要执行的线程")])]),t._v(" "),a("p",[a("strong",[t._v("重要方法")])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("public int await() throws InterruptedException, BrokenBarrierException\n\npublic int await(long timeout, TimeUnit unit) throws InterruptedException, BrokenBarrierException, TimeoutException\n")])])]),a("p",[a("code",[t._v("await()")]),t._v(" 表示当前线程已经到了栅栏处等待")]),t._v(" "),a("p",[a("code",[t._v("await(long timeout, TimeUnit unit)")]),t._v(" 在等待的时候设置了超时时间，如果超时的话，会抛出"),a("code",[t._v("java.util.concurrent.TimeoutException")])]),t._v(" "),a("h4",{attrs:{id:"示例"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#示例"}},[t._v("#")]),t._v(" 示例")]),t._v(" "),a("p",[t._v("3人闯关，但是必须等待每个人都结束后才能开始下一关")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("\n\n")])])])])}),[],!1,null,null,null);a.default=s.exports}}]);
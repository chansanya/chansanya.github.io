(window.webpackJsonp=window.webpackJsonp||[]).push([[66],{501:function(a,t,s){"use strict";s.r(t);var e=s(15),r=Object(e.a)({},(function(){var a=this,t=a._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h2",{attrs:{id:"srs"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#srs"}},[a._v("#")]),a._v(" SRS")]),a._v(" "),t("h3",{attrs:{id:"安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[a._v("#")]),a._v(" 安装")]),a._v(" "),t("div",{staticClass:"language-yaml extra-class"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("version")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"2"')]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("services")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("srs")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("restart")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"always"')]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("container_name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" srs\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("image")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" registry.cn"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v("hangzhou.aliyuncs.com/ossrs/srs"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("5")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("ports")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"1935:1935"')]),a._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"1985:1985"')]),a._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"8080:8080"')]),a._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"8000:8000"')]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("environment")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("CANDIDATE")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("  能访问到的地址\n\n")])])]),t("h3",{attrs:{id:"推流"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#推流"}},[a._v("#")]),a._v(" 推流")]),a._v(" "),t("h5",{attrs:{id:"rtmp"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#rtmp"}},[a._v("#")]),a._v(" RTMP")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("ffmpeg "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-re")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-i")]),a._v(" zz.mp4   "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-vcodec")]),a._v(" libx264 "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-acodec")]),a._v(" aac  "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-f")]),a._v(" flv "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"rtmp://192.168.1.100/live/livestream"')]),a._v("\n")])])]),t("h5",{attrs:{id:"播放地址"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#播放地址"}},[a._v("#")]),a._v(" 播放地址：")]),a._v(" "),t("p",[t("strong",[a._v("RTMP：")]),a._v(" "),t("code",[a._v("rtmp://192.168.1.100/live/livestream")])]),a._v(" "),t("p",[t("strong",[a._v("HLS：")]),a._v(" "),t("code",[a._v("http://192.168.1.100:8080/live/livestream.m3u8")])]),a._v(" "),t("p",[t("strong",[a._v("FLV：")]),a._v(" "),t("code",[a._v("http://localhost:8080/live/livestream.flv")])]),a._v(" "),t("h2",{attrs:{id:"zlm"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#zlm"}},[a._v("#")]),a._v(" ZLM")]),a._v(" "),t("h3",{attrs:{id:"安装-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装-2"}},[a._v("#")]),a._v(" 安装")]),a._v(" "),t("div",{staticClass:"language-yaml extra-class"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("version")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"2"')]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("services")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("ZLMediaKit")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("restart")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"no"')]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("container_name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" ZLMediaKit\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("image")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" zlmediakit/zlmediakit"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("master\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#  image: zlmediakit/zlmediakit:Release.1.0.2")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("ports")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"1935:1935"')]),a._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"180:180"')]),a._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"1443:1443"')]),a._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"1554:1554"')]),a._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"1935:1935/udp"')]),a._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"1554:1554/udp"')]),a._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"10000:10000"')]),a._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"10000:10000/udp"')]),a._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"8000:8000/udp"')]),a._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"9000:9000/udp"')]),a._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"35000-35010:35000-35010/tcp"')]),a._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"35000-35010:35000-35010/udp"')]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("volumes")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v(" ./conf"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("/opt/media/conf\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v(" ./log"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("/opt/media/bin/log\n\n")])])]),t("h3",{attrs:{id:"编译"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#编译"}},[a._v("#")]),a._v(" 编译")]),a._v(" "),t("p",[a._v("clone 项目")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("sh")]),a._v(" build_docker_images.sh "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-t")]),a._v(" build "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" x86_64  "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-m")]),a._v(" Release "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1.0")]),a._v(".2\n")])])]),t("h2",{attrs:{id:"推流-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#推流-2"}},[a._v("#")]),a._v(" 推流")]),a._v(" "),t("h3",{attrs:{id:"使用rtsp方式推流"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用rtsp方式推流"}},[a._v("#")]),a._v(" 使用rtsp方式推流")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# h264推流")]),a._v("\nffmpeg "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-re")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-i")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"/path/to/test.mp4"')]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-vcodec")]),a._v(" h264 "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-acodec")]),a._v(" aac "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-f")]),a._v(" rtsp "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-rtsp_transport")]),a._v(" tcp rtsp://127.0.0.1/live/test\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# h265推流")]),a._v("\nffmpeg "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-re")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-i")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"/path/to/test.mp4"')]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-vcodec")]),a._v(" h265 "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-acodec")]),a._v(" aac "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-f")]),a._v(" rtsp "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-rtsp_transport")]),a._v(" tcp rtsp://127.0.0.1/live/test\n")])])]),t("h3",{attrs:{id:"使用rtmp方式推流"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用rtmp方式推流"}},[a._v("#")]),a._v(" 使用rtmp方式推流")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# rtmp推流")]),a._v("\nffmpeg "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-re")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-i")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"/path/to/test.mp4"')]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-vcodec")]),a._v(" h264 "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-acodec")]),a._v(" aac "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-f")]),a._v(" flv rtmp://127.0.0.1/live/test\n")])])]),t("h3",{attrs:{id:"使用rtp方式推流"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用rtp方式推流"}},[a._v("#")]),a._v(" 使用rtp方式推流")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# h264推流")]),a._v("\nffmpeg "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-re")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-i")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"/path/to/test.mp4"')]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-vcodec")]),a._v(" h264 "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-acodec")]),a._v(" aac "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-f")]),a._v(" rtp_mpegts rtp://127.0.0.1:10000\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# h265推流")]),a._v("\nffmpeg "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-re")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-i")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"/path/to/test.mp4"')]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-vcodec")]),a._v(" h265 "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-acodec")]),a._v(" aac "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-f")]),a._v(" rtp_mpegts rtp://127.0.0.1:10000\n")])])]),t("h3",{attrs:{id:"桌面录制"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#桌面录制"}},[a._v("#")]),a._v(" 桌面录制")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("ffmpeg -re  -f gdigrab  -i desktop -vcodec h264 -acodec aac -f rtp_mpegts rtp://127.0.0.1:10000\n\nffmpeg -f gdigrab -framerate 30 -i desktop -fflags nobuffer -probesize 32 -analyzeduration 0 -c:v libx264 -preset ultrafast -tune zerolatency -g 30 -b:v 2M -s 1280x720 -f rtp_mpegts rtp://192.168.1.226:10000\n")])])]),t("h2",{attrs:{id:"url-规则"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#url-规则"}},[a._v("#")]),a._v(" URL 规则")]),a._v(" "),t("h4",{attrs:{id:"rtsp"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#rtsp"}},[a._v("#")]),a._v(" RTSP")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("rtsp://127.0.0.1:554/rtp/test\n")])])]),t("h4",{attrs:{id:"rtmp-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#rtmp-2"}},[a._v("#")]),a._v(" RTMP")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("rtmp://192.168.1.226:1935/rtp/test\n\nhttp://192.168.1.226/live/test.live.flv\n\nws://192.168.1.226/live/test.live.flv\n")])])]),t("h4",{attrs:{id:"hls-mpegts"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#hls-mpegts"}},[a._v("#")]),a._v(" HLS(mpegts)")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("http://192.168.1.226/live/test/hls.m3u8\n")])])]),t("h4",{attrs:{id:"hls-fmp4"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#hls-fmp4"}},[a._v("#")]),a._v(" HLS(fmp4)")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("http://192.168.1.226/live/test/hls.fmp4.m3u8\n")])])]),t("h4",{attrs:{id:"live-ts"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#live-ts"}},[a._v("#")]),a._v(" .live.ts")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("http://192.168.1.226/live/test.live.ts\n\nws://192.168.1.226/live/test.live.ts\n")])])]),t("h4",{attrs:{id:"live-mp4"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#live-mp4"}},[a._v("#")]),a._v(" .live.mp4")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("http://192.168.1.226/live/test.live.mp4\n\nws://192.168.1.226/live/test.live.mp4\n")])])])])}),[],!1,null,null,null);t.default=r.exports}}]);
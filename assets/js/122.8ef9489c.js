(window.webpackJsonp=window.webpackJsonp||[]).push([[122],{432:function(a,t,s){"use strict";s.r(t);var e=s(15),r=Object(e.a)({},(function(){var a=this,t=a._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("p",[a._v("使用openssl生成秘钥对，证书申请文件以及数字证书。\n")]),a._v(" "),t("h2",{attrs:{id:"安装openssl"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装openssl"}},[a._v("#")]),a._v(" 安装openssl")]),a._v(" "),t("p",[t("a",{attrs:{href:"https://slproweb.com/products/Win32OpenSSL.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("传送门"),t("OutboundLink")],1)]),a._v(" "),t("h2",{attrs:{id:"操作命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#操作命令"}},[a._v("#")]),a._v(" 操作命令")]),a._v(" "),t("details",{staticClass:"custom-block details"},[t("summary",[a._v("点击查看")]),a._v(" "),t("table",[t("thead",[t("tr",[t("th",[a._v("命令")]),a._v(" "),t("th",[a._v("描述")])])]),a._v(" "),t("tbody",[t("tr",[t("td",[a._v("openssl req")]),a._v(" "),t("td",[a._v("处理证书请求（CSR）")])]),a._v(" "),t("tr",[t("td",[a._v("openssl x509")]),a._v(" "),t("td",[a._v("处理 X.509 证书")])]),a._v(" "),t("tr",[t("td",[a._v("openssl rsa/dsa/ec")]),a._v(" "),t("td",[a._v("生成RSA/DSA/椭圆曲线ES私钥")])]),a._v(" "),t("tr",[t("td",[a._v("openssl genpkey")]),a._v(" "),t("td",[a._v("处理 RSA 密钥")])]),a._v(" "),t("tr",[t("td",[a._v("-algorithm RSA")]),a._v(" "),t("td",[a._v("指定生成 RSA 密钥")])]),a._v(" "),t("tr",[t("td",[a._v("-inform")]),a._v(" "),t("td",[a._v("指定输入文件的格式，例如:PEM/DER")])]),a._v(" "),t("tr",[t("td",[a._v("-outform")]),a._v(" "),t("td",[a._v("指定输出文件的格式，例如:PEM/DER")])]),a._v(" "),t("tr",[t("td",[a._v("-x509")]),a._v(" "),t("td",[a._v("生成自签名证书")])]),a._v(" "),t("tr",[t("td",[a._v("-new")]),a._v(" "),t("td",[a._v("生成新的证书")])]),a._v(" "),t("tr",[t("td",[a._v("-in")]),a._v(" "),t("td",[a._v("指定输入的证书请求文件（csr）")])]),a._v(" "),t("tr",[t("td",[a._v("-CA")]),a._v(" "),t("td",[a._v("指定用于签署证书的 CA 证书文件")])]),a._v(" "),t("tr",[t("td",[a._v("-key")]),a._v(" "),t("td",[a._v("指定用于生成证书的私钥文件")])]),a._v(" "),t("tr",[t("td",[a._v("-signkey")]),a._v(" "),t("td",[a._v("指定用于签名的私钥文件")])]),a._v(" "),t("tr",[t("td",[a._v("-CAkey")]),a._v(" "),t("td",[a._v("指定用于签署证书的 CA 私钥文件")])]),a._v(" "),t("tr",[t("td",[a._v("-CAcreateserial")]),a._v(" "),t("td",[a._v("生成并使用一个序列号文件")])]),a._v(" "),t("tr",[t("td",[a._v("-days")]),a._v(" "),t("td",[a._v("证书的有效期天数")])]),a._v(" "),t("tr",[t("td",[a._v("-out")]),a._v(" "),t("td",[a._v("生成的签名证书输出文件")])]),a._v(" "),t("tr",[t("td",[a._v("-pkeyopt rsa_keygen_bits:2048")]),a._v(" "),t("td",[a._v("指定 密钥的长度为 2048 位")])]),a._v(" "),t("tr",[t("td",[a._v("-sha256")]),a._v(" "),t("td",[a._v("使用 SHA-256 哈希算法进行签名")])]),a._v(" "),t("tr",[t("td",[a._v('-subj "/CN=My Custom CA"')]),a._v(" "),t("td",[a._v("证书的通用名称（Common Name）为 My Custom CA")])]),a._v(" "),t("tr",[t("td",[a._v("-text")]),a._v(" "),t("td",[a._v("以文本格式输出密钥的详细信息")])]),a._v(" "),t("tr",[t("td",[a._v("-noout")]),a._v(" "),t("td",[a._v("不输出密钥的原始内容")])]),a._v(" "),t("tr",[t("td",[a._v("-pubkey")]),a._v(" "),t("td",[a._v("输出公钥")])]),a._v(" "),t("tr",[t("td",[a._v("-check")]),a._v(" "),t("td",[a._v("检查密钥的完整性和一致性")])]),a._v(" "),t("tr",[t("td",[a._v("---")]),a._v(" "),t("td",[a._v("---")])])])])]),a._v(" "),t("h3",{attrs:{id:"私钥"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#私钥"}},[a._v("#")]),a._v(" 私钥")]),a._v(" "),t("h4",{attrs:{id:"生成私钥"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#生成私钥"}},[a._v("#")]),a._v(" 生成私钥")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("openssl genpkey "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-algorithm")]),a._v(" RSA "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-out")]),a._v(" private_key.pem\n")])])]),t("h4",{attrs:{id:"查看私钥"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看私钥"}},[a._v("#")]),a._v(" 查看私钥")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("openssl rsa "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-in")]),a._v(" private_key.pem "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-check")]),a._v("\n")])])]),t("h3",{attrs:{id:"公钥"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#公钥"}},[a._v("#")]),a._v(" 公钥")]),a._v(" "),t("h4",{attrs:{id:"从私钥提取公钥"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#从私钥提取公钥"}},[a._v("#")]),a._v(" 从私钥提取公钥")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("openssl rsa "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-in")]),a._v(" private_key.pem "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-pubout")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-out")]),a._v(" public_key.pem\n")])])]),t("h4",{attrs:{id:"显示公钥内容"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#显示公钥内容"}},[a._v("#")]),a._v(" 显示公钥内容")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("openssl rsa "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-in")]),a._v(" private_key.pem "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-pubout")]),a._v("\n")])])]),t("h4",{attrs:{id:"从-csr或证书文件中提取公钥"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#从-csr或证书文件中提取公钥"}},[a._v("#")]),a._v(" 从.csr或证书文件中提取公钥")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("openssl req "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-in")]),a._v(" request.csr "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-noout")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-pubkey")]),a._v("\n")])])]),t("h4",{attrs:{id:"从证书文件-如-crt-或-cer-提取公钥"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#从证书文件-如-crt-或-cer-提取公钥"}},[a._v("#")]),a._v(" 从证书文件（如 .crt 或 .cer）提取公钥")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("openssl x509 "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-in")]),a._v(" certificate.crt "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-noout")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-pubkey")]),a._v("\n")])])]),t("h3",{attrs:{id:"csr"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#csr"}},[a._v("#")]),a._v(" CSR")]),a._v(" "),t("details",{staticClass:"custom-block details"},[t("summary",[a._v("通过CSR申请证书流程")]),a._v(" "),t("h3",{attrs:{id:"生成私钥和-csr-文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#生成私钥和-csr-文件"}},[a._v("#")]),a._v(" 生成私钥和 CSR 文件：")]),a._v(" "),t("p",[a._v("个人或组织在本地生成一对密钥对：一个私钥和一个公钥。\n使用生成的私钥来创建一个 CSR（证书签名请求，.csr 文件）。CSR 文件包含申请者的公钥和身份信息（如域名、组织名等），并由私钥对这些信息签名。\n注意：\n私钥并不会出现在 CSR 文件中，且不会被发送给证书颁发机构（CA）。私钥是保密的，只由申请人自己持有。")]),a._v(" "),t("h3",{attrs:{id:"提交-csr-文件给-ca"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#提交-csr-文件给-ca"}},[a._v("#")]),a._v(" 提交 CSR 文件给 CA：")]),a._v(" "),t("p",[a._v("个人或组织将生成的 .csr 文件提交给证书颁发机构（CA）。\nCA 根据 CSR 文件中的信息验证申请人的身份。验证方法可能包括域名验证、组织验证等。")]),a._v(" "),t("h3",{attrs:{id:"ca-生成证书"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ca-生成证书"}},[a._v("#")]),a._v(" CA 生成证书：")]),a._v(" "),t("p",[a._v("一旦 CA 验证成功，它会使用 CA 自己的私钥对 CSR 中的公钥和身份信息进行签名，生成证书文件（通常为 .crt 或 .cer）。\n证书文件包含了申请人的公钥、身份信息以及 CA 的数字签名。这样，证书可以被其他人验证为“由 CA 颁发”，并确定证书内容的完整性。")]),a._v(" "),t("h3",{attrs:{id:"获得证书并安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#获得证书并安装"}},[a._v("#")]),a._v(" 获得证书并安装：")]),a._v(" "),t("p",[a._v("CA 将生成的证书文件（.crt 或 .cer）返回给申请人。\n申请人可以将该证书文件与自己的私钥一起配置在服务器上，完成 SSL/TLS 安装。")])]),a._v(" "),t("h4",{attrs:{id:"使用私钥生成csr"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用私钥生成csr"}},[a._v("#")]),a._v(" 使用私钥生成CSR")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("openssl req "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-new")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-key")]),a._v(" private_key.pem "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-out")]),a._v(" request.csr\n")])])]),t("h4",{attrs:{id:"查看csr"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看csr"}},[a._v("#")]),a._v(" 查看csr")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("openssl req "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-in")]),a._v(" request.csr "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-noout")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-text")]),a._v("\n")])])]),t("h3",{attrs:{id:"发证"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#发证"}},[a._v("#")]),a._v(" 发证")]),a._v(" "),t("h4",{attrs:{id:"使用openssl秘钥生成-x-509-证书"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用openssl秘钥生成-x-509-证书"}},[a._v("#")]),a._v(" 使用OpenSSL秘钥生成 X.509 证书")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("openssl req  "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-x509")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-new")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-key")]),a._v(" private.key "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-days")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("365")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-out")]),a._v(" certificate.crt \n")])])]),t("h4",{attrs:{id:"使用openssl秘钥签署csr生成-x-509-证书"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用openssl秘钥签署csr生成-x-509-证书"}},[a._v("#")]),a._v(" 使用OpenSSL秘钥签署CSR生成 X.509 证书")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("openssl x509 "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-req")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-days")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("10")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-in")]),a._v(" request.csr "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-signkey")]),a._v(" private_key.pem "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-out")]),a._v(" certificate.crt\n")])])]),t("h4",{attrs:{id:"使用ca证书签署csr生成x-509-证书"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用ca证书签署csr生成x-509-证书"}},[a._v("#")]),a._v(" 使用CA证书签署CSR生成X.509 证书")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 1. 生成自签名证书")]),a._v("\nopenssl req "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-x509")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-new")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-key")]),a._v(" private_key.pem "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-days")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("3650")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-out")]),a._v(" ca_cert.pem "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-subj")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"/CN=My Custom CA"')]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 2. 使用CA证书和私钥签署 CSR")]),a._v("\nopenssl x509 "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-req")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-in")]),a._v(" request.csr "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-CA")]),a._v(" ca_cert.pem "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-CAkey")]),a._v(" ca_private_key.pem "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-CAcreateserial")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-out")]),a._v(" signed_cert.crt "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-days")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("365")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-sha256")]),a._v("\n")])])]),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[a._v("描述")]),a._v(" "),t("p",[a._v("openssl req -x509：用于生成自签名证书。")]),a._v(" "),t("p",[a._v("openssl x509 -req：用于处理证书请求（CSR）并生成由证书颁发机构证书（CA）签名的证书。")])]),a._v(" "),t("h4",{attrs:{id:"查看证书信息"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看证书信息"}},[a._v("#")]),a._v(" 查看证书信息")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("openssl x509 "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-in")]),a._v(" certificate.crt "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-text")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-noout")]),a._v(" \n")])])]),t("h3",{attrs:{id:"证书转换"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#证书转换"}},[a._v("#")]),a._v(" 证书转换")]),a._v(" "),t("h4",{attrs:{id:"pem-转-der"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#pem-转-der"}},[a._v("#")]),a._v(" PEM 转 DER：")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("openssl x509 "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-in")]),a._v(" certificate.crt "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-outform")]),a._v(" DER "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-out")]),a._v(" certificate.cer\n")])])]),t("h4",{attrs:{id:"der-转-pem"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#der-转-pem"}},[a._v("#")]),a._v(" DER 转 PEM：")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("openssl x509 "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-in")]),a._v(" certificate.cer "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-inform")]),a._v(" DER "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-outform")]),a._v(" PEM "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-out")]),a._v(" certificate.crt\n")])])])])}),[],!1,null,null,null);t.default=r.exports}}]);
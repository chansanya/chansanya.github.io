(window.webpackJsonp=window.webpackJsonp||[]).push([[89],{481:function(t,v,_){"use strict";_.r(v);var d=_(15),e=Object(d.a)({},(function(){var t=this,v=t._self._c;return v("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[v("h3",{attrs:{id:"创建-creation"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#创建-creation"}},[t._v("#")]),t._v(" 创建（Creation）")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("方法")]),t._v(" "),v("th",[t._v("说明")]),t._v(" "),v("th",[t._v("示例")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[v("code",[t._v("Mono.just(T)")])]),t._v(" "),v("td",[t._v("立即创建一个值（声明时执行）")]),t._v(" "),v("td",[v("code",[t._v('Mono.just("Hi")')])])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("Mono.empty()")])]),t._v(" "),v("td",[t._v("空（0 个元素，直接 complete）")]),t._v(" "),v("td",[v("code",[t._v("Mono.empty()")])])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("Mono.error(Throwable)")])]),t._v(" "),v("td",[t._v("直接错误信号")]),t._v(" "),v("td",[v("code",[t._v("Mono.error(new RuntimeException())")])])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("Mono.defer(Supplier<Mono<T>>)")])]),t._v(" "),v("td",[t._v("订阅时才生成 Mono")]),t._v(" "),v("td",[v("code",[t._v("Mono.defer(() -> Mono.just(UUID.randomUUID()))")])])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("Mono.fromCallable(Callable<T>)")])]),t._v(" "),v("td",[t._v("包装可能抛异常的阻塞逻辑")]),t._v(" "),v("td",[v("code",[t._v("Mono.fromCallable(() -> Files.readString(path))")])])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("Flux.just(T...)")])]),t._v(" "),v("td",[t._v("多个已知值")]),t._v(" "),v("td",[v("code",[t._v("Flux.just(1,2,3)")])])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("Flux.range(start, count)")])]),t._v(" "),v("td",[t._v("整数序列")]),t._v(" "),v("td",[v("code",[t._v("Flux.range(1, 5)")])])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("Flux.interval(Duration)")])]),t._v(" "),v("td",[t._v("定时发射递增 long")]),t._v(" "),v("td",[v("code",[t._v("Flux.interval(Duration.ofSeconds(1))")])])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("Flux.generate(...)")])]),t._v(" "),v("td",[t._v("同步推送，一个个生成")]),t._v(" "),v("td",[v("code",[t._v('Flux.generate(sink -> sink.next("hi"))')])])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("Flux.create(...)")])]),t._v(" "),v("td",[t._v("异步/回调式推送")]),t._v(" "),v("td",[v("code",[t._v('Flux.create(sink -> {sink.next("a");sink.complete();})')])])])])]),t._v(" "),v("h3",{attrs:{id:"转换"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#转换"}},[t._v("#")]),t._v(" 转换")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("方法")]),t._v(" "),v("th",[t._v("说明")]),t._v(" "),v("th",[t._v("示例")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[v("code",[t._v("map(Function)")])]),t._v(" "),v("td",[t._v("一对一映射")]),t._v(" "),v("td",[v("code",[t._v("flux.map(x -> x*2)")])])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("flatMap(Function)")])]),t._v(" "),v("td",[t._v("一对多映射并展开（并行，可能乱序）")]),t._v(" "),v("td",[v("code",[t._v("flux.flatMap(x -> Flux.range(1, x))")])])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("concatMap(Function)")])]),t._v(" "),v("td",[t._v("一对多映射并展开（顺序保证）")]),t._v(" "),v("td",[v("code",[t._v("flux.concatMap(x -> Flux.range(1, x))")])])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("switchMap(Function)")])]),t._v(" "),v("td",[t._v("只保留最新的映射流")]),t._v(" "),v("td",[v("code",[t._v("flux.switchMap(x -> Flux.interval(Duration.ofMillis(100)))")])])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("buffer(n)")])]),t._v(" "),v("td",[t._v("收集成批量")]),t._v(" "),v("td",[v("code",[t._v("flux.buffer(3)")])])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("window(n)")])]),t._v(" "),v("td",[t._v("切分成 "),v("code",[t._v("Flux<Flux<T>>")])]),t._v(" "),v("td",[v("code",[t._v("flux.window(3)")])])])])]),t._v(" "),v("h3",{attrs:{id:"过滤-限流"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#过滤-限流"}},[t._v("#")]),t._v(" 过滤/限流")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("方法")]),t._v(" "),v("th",[t._v("说明")]),t._v(" "),v("th",[t._v("示例")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[v("code",[t._v("filter(Predicate)")])]),t._v(" "),v("td",[t._v("过滤不符合条件的")]),t._v(" "),v("td",[v("code",[t._v("flux.filter(x -> x % 2 == 0)")])])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("take(n)")])]),t._v(" "),v("td",[t._v("只取前 n 个")]),t._v(" "),v("td",[v("code",[t._v("flux.take(3)")])])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("take(Duration)")])]),t._v(" "),v("td",[t._v("取一段时间")]),t._v(" "),v("td",[v("code",[t._v("flux.take(Duration.ofSeconds(5))")])])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("skip(n)")])]),t._v(" "),v("td",[t._v("跳过前 n 个")]),t._v(" "),v("td",[v("code",[t._v("flux.skip(2)")])])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("distinct()")])]),t._v(" "),v("td",[t._v("去重")]),t._v(" "),v("td",[v("code",[t._v("flux.distinct()")])])])])]),t._v(" "),v("h3",{attrs:{id:"错误处理"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#错误处理"}},[t._v("#")]),t._v(" 错误处理")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("方法")]),t._v(" "),v("th",[t._v("说明")]),t._v(" "),v("th",[t._v("示例")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[v("code",[t._v("onErrorReturn(value)")])]),t._v(" "),v("td",[t._v("出错时返回一个默认值")]),t._v(" "),v("td",[v("code",[t._v("flux.onErrorReturn(-1)")])])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("onErrorResume(err -> Publisher)")])]),t._v(" "),v("td",[t._v("出错时切换到新流")]),t._v(" "),v("td",[v("code",[t._v("flux.onErrorResume(e -> Flux.just(100,200))")])])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("onErrorContinue(...)")])]),t._v(" "),v("td",[t._v("出错时跳过该元素继续")]),t._v(" "),v("td",[v("code",[t._v("flux.onErrorContinue((err, obj) -> {})")])])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("retry(n)")])]),t._v(" "),v("td",[t._v("出错重试 n 次")]),t._v(" "),v("td",[v("code",[t._v("flux.retry(3)")])])])])]),t._v(" "),v("h3",{attrs:{id:"回调"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#回调"}},[t._v("#")]),t._v(" 回调")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("方法")]),t._v(" "),v("th",[t._v("说明")]),t._v(" "),v("th",[t._v("示例")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[v("code",[t._v("doOnNext(Consumer)")])]),t._v(" "),v("td",[t._v("每个元素时回调")]),t._v(" "),v("td",[v("code",[t._v('flux.doOnNext(x -> log.info("Got {}", x))')])])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("doOnError(Consumer)")])]),t._v(" "),v("td",[t._v("出错时回调")]),t._v(" "),v("td",[v("code",[t._v('flux.doOnError(e -> log.error("Error", e))')])])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("doOnComplete(Runnable)")])]),t._v(" "),v("td",[t._v("完成时回调")]),t._v(" "),v("td",[v("code",[t._v('flux.doOnComplete(() -> log.info("Done"))')])])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("doFinally(SignalType -> )")])]),t._v(" "),v("td",[t._v("流终止时（完成/错误/取消）统一回调")]),t._v(" "),v("td",[v("code",[t._v('flux.doFinally(sig -> log.info("Terminated: {}", sig))')])])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("doFirst(Runnable)")])]),t._v(" "),v("td",[t._v("订阅前执行")]),t._v(" "),v("td",[v("code",[t._v('flux.doFirst(() -> log.info("Before subscribe"))')])])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("log()")])]),t._v(" "),v("td",[t._v("打印完整生命周期日志")]),t._v(" "),v("td",[v("code",[t._v("flux.log()")])])])])]),t._v(" "),v("h3",{attrs:{id:"组合"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#组合"}},[t._v("#")]),t._v(" 组合")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("方法")]),t._v(" "),v("th",[t._v("说明")]),t._v(" "),v("th",[t._v("示例")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[v("code",[t._v("merge(flux1, flux2)")])]),t._v(" "),v("td",[t._v("合并（并行，顺序不保证）")]),t._v(" "),v("td",[v("code",[t._v("Flux.merge(f1, f2)")])])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("concat(flux1, flux2)")])]),t._v(" "),v("td",[t._v("串行拼接（顺序保证）")]),t._v(" "),v("td",[v("code",[t._v("Flux.concat(f1, f2)")])])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("zip(flux1, flux2, combiner)")])]),t._v(" "),v("td",[t._v("按索引合并")]),t._v(" "),v("td",[v("code",[t._v("Flux.zip(f1, f2, (a,b) -> a+b)")])])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("combineLatest(...)")])]),t._v(" "),v("td",[t._v("任一流有新值就合并最新值")]),t._v(" "),v("td",[v("code",[t._v("Flux.combineLatest(f1, f2, (a,b) -> a+b)")])])])])]),t._v(" "),v("h3",{attrs:{id:"订阅"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#订阅"}},[t._v("#")]),t._v(" 订阅")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("方法")]),t._v(" "),v("th",[t._v("说明")]),t._v(" "),v("th",[t._v("示例")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[v("code",[t._v("subscribe(Consumer)")])]),t._v(" "),v("td",[t._v("消费元素")]),t._v(" "),v("td",[v("code",[t._v("flux.subscribe(System.out::println)")])])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("subscribe(onNext, onError, onComplete)")])]),t._v(" "),v("td",[t._v("消费元素 + 错误 + 完成")]),t._v(" "),v("td",[v("code",[t._v("flux.subscribe(v -> {}, e -> {}, () -> {})")])])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("block()")])]),t._v(" "),v("td",[t._v("阻塞等待（Mono 专用，调试用）")]),t._v(" "),v("td",[v("code",[t._v("Mono.just(1).block()")])])]),t._v(" "),v("tr",[v("td",[v("code",[t._v("blockFirst()")]),t._v(" / "),v("code",[t._v("blockLast()")])]),t._v(" "),v("td",[t._v("阻塞取 Flux 的第一个/最后一个元素")]),t._v(" "),v("td",[v("code",[t._v("flux.blockFirst()")])])])])])])}),[],!1,null,null,null);v.default=e.exports}}]);
(window.webpackJsonp=window.webpackJsonp||[]).push([[135],{427:function(a,t,s){"use strict";s.r(t);var e=s(15),n=Object(e.a)({},(function(){var a=this,t=a._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h2",{attrs:{id:"wsl-简介"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#wsl-简介"}},[a._v("#")]),a._v(" WSL 简介")]),a._v(" "),t("p",[a._v("Windows Subsystem for Linux (WSL) 允许在 Windows 上直接运行 Linux 环境，无需虚拟机。")]),a._v(" "),t("h2",{attrs:{id:"安装-wsl"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装-wsl"}},[a._v("#")]),a._v(" 安装 WSL")]),a._v(" "),t("h3",{attrs:{id:"方法一-命令行安装-推荐"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#方法一-命令行安装-推荐"}},[a._v("#")]),a._v(" 方法一：命令行安装（推荐）")]),a._v(" "),t("div",{staticClass:"language-powershell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-powershell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 安装默认的 Ubuntu 发行版")]),a._v("\nwsl "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("--")]),a._v("install\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 或者指定发行版")]),a._v("\nwsl "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("--")]),a._v("install "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("d Ubuntu-22"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("04\n")])])]),t("h2",{attrs:{id:"常用-wsl-命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#常用-wsl-命令"}},[a._v("#")]),a._v(" 常用 WSL 命令")]),a._v(" "),t("h3",{attrs:{id:"系统管理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#系统管理"}},[a._v("#")]),a._v(" 系统管理")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 查看已安装的发行版")]),a._v("\nwsl "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--list")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--verbose")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 设置默认发行版")]),a._v("\nwsl --set-default Ubuntu-22.04\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 停止 WSL 服务")]),a._v("\nwsl "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--shutdown")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 导出发行版")]),a._v("\nwsl "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--export")]),a._v(" Ubuntu-22.04 ubuntu-backup.tar\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 导入发行版")]),a._v("\nwsl "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--import")]),a._v(" Ubuntu-22.04 C:"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("WSL"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("Ubuntu-new ubuntu-backup.tar\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 或者替换现有发行版（先取消注册再导入）")]),a._v("\nwsl "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--unregister")]),a._v(" Ubuntu-22.04\nwsl "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--import")]),a._v(" Ubuntu-22.04 C:"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("WSL"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("Ubuntu-new ubuntu-backup.tar\n\n")])])]),t("h3",{attrs:{id:"版本管理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#版本管理"}},[a._v("#")]),a._v(" 版本管理")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 设置 WSL 版本")]),a._v("\nwsl --set-version Ubuntu-22.04 "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("2")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 查看版本信息")]),a._v("\nwsl "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--status")]),a._v("\n")])])]),t("h2",{attrs:{id:"wsl-配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#wsl-配置"}},[a._v("#")]),a._v(" WSL 配置")]),a._v(" "),t("h3",{attrs:{id:"修改默认用户"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#修改默认用户"}},[a._v("#")]),a._v(" 修改默认用户")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 在 WSL 中执行")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("nano")]),a._v(" /etc/wsl.conf\n")])])]),t("p",[a._v("添加以下内容：")]),a._v(" "),t("div",{staticClass:"language-ini extra-class"},[t("pre",{pre:!0,attrs:{class:"language-ini"}},[t("code",[t("span",{pre:!0,attrs:{class:"token section"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),t("span",{pre:!0,attrs:{class:"token section-name selector"}},[a._v("user")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")])]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token section"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),t("span",{pre:!0,attrs:{class:"token section-name selector"}},[a._v("wsl2")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")])]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("memory")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("32GB")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#swap=8GB")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("processors")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("16")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#nat模式")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#localhostForwarding=true")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token section"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),t("span",{pre:!0,attrs:{class:"token section-name selector"}},[a._v("experimental")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")])]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("autoMemoryReclaim")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("gradual")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#Mirrored 模式")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("networkingMode")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("mirrored")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("dnsTunneling")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("true")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("firewall")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("true")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("autoProxy")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("true")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("sparseVhd")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("true")]),a._v("\n")])])]),t("h3",{attrs:{id:"固定-ip-地址"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#固定-ip-地址"}},[a._v("#")]),a._v(" 固定 IP 地址")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 查看 WSL IP 地址")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("ip")]),a._v(" addr show eth0\n")])])]),t("h3",{attrs:{id:"配置-git"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置-git"}},[a._v("#")]),a._v(" 配置 Git")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("git")]),a._v(" config "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--global")]),a._v(" user.name "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"Your Name"')]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("git")]),a._v(" config "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--global")]),a._v(" user.email "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"your-email@example.com"')]),a._v("\n")])])]),t("h2",{attrs:{id:"常见问题解决"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#常见问题解决"}},[a._v("#")]),a._v(" 常见问题解决")]),a._v(" "),t("h3",{attrs:{id:"wsl-启动失败"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#wsl-启动失败"}},[a._v("#")]),a._v(" WSL 启动失败")]),a._v(" "),t("div",{staticClass:"language-powershell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-powershell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 重置 WSL")]),a._v("\nwsl "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("--")]),a._v("unregister Ubuntu-22"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("04\nwsl "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("--")]),a._v("install "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("d Ubuntu-22"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("04\n")])])]),t("h3",{attrs:{id:"磁盘空间不足"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#磁盘空间不足"}},[a._v("#")]),a._v(" 磁盘空间不足")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 清理包缓存")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("apt")]),a._v(" autoclean\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("apt")]),a._v(" autoremove\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 查看磁盘使用情况")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("df")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-h")]),a._v("\n")])])]),t("h2",{attrs:{id:"备份与恢复"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#备份与恢复"}},[a._v("#")]),a._v(" 备份与恢复")]),a._v(" "),t("h3",{attrs:{id:"定期备份"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#定期备份"}},[a._v("#")]),a._v(" 定期备份")]),a._v(" "),t("div",{staticClass:"language-powershell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-powershell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 导出当前 WSL 实例")]),a._v("\nwsl "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("--")]),a._v("export Ubuntu-22"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("04 ubuntu-backup-$"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("Get-Date")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("Format "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"yyyyMMdd"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("tar\n")])])]),t("h3",{attrs:{id:"恢复备份"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#恢复备份"}},[a._v("#")]),a._v(" 恢复备份")]),a._v(" "),t("div",{staticClass:"language-powershell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-powershell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 导入备份文件")]),a._v("\nwsl "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("--")]),a._v("import Ubuntu-restored C:\\\\WSL\\\\Ubuntu-restored ubuntu-backup"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("tar\n")])])])])}),[],!1,null,null,null);t.default=n.exports}}]);
(window.webpackJsonp=window.webpackJsonp||[]).push([[106],{404:function(t,e,a){"use strict";a.r(e);var s=a(14),r=Object(s.a)({},(function(){var t=this,e=t._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h2",{attrs:{id:"查看nginx-版本"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#查看nginx-版本"}},[t._v("#")]),t._v(" 查看Nginx 版本")]),t._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[t._v("nginx "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-v")]),t._v("\n")])])]),e("h2",{attrs:{id:"下载对应版本nginx源码包-解压"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#下载对应版本nginx源码包-解压"}},[t._v("#")]),t._v(" 下载对应版本Nginx源码包 解压")]),t._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("wget")]),t._v(" http://nginx.org/download/nginx-1.20.1.tar.gz\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("tar")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-xvzf")]),t._v(" nginx-1.20.1.tar.gz\n")])])]),e("h2",{attrs:{id:"下载对应版本nginx-ngx-http-substitutions-filter-module-模块"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#下载对应版本nginx-ngx-http-substitutions-filter-module-模块"}},[t._v("#")]),t._v(" 下载对应版本Nginx  ngx_http_substitutions_filter_module 模块")]),t._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" clone git://github.com/yaoweibin/ngx_http_substitutions_filter_module.git\n")])])]),e("h2",{attrs:{id:"添加模块"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#添加模块"}},[t._v("#")]),t._v(" 添加模块")]),t._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[t._v("./configure  "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--prefix")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/usr/share/nginx --sbin-path"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/usr/sbin/nginx --modules-path"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/usr/lib64/nginx/modules --conf-path"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/etc/nginx/nginx.conf --error-log-path"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/var/log/nginx/error.log --http-log-path"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/var/log/nginx/access.log --http-client-body-temp-path"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/var/lib/nginx/tmp/client_body --http-proxy-temp-path"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/var/lib/nginx/tmp/proxy --http-fastcgi-temp-path"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/var/lib/nginx/tmp/fastcgi --http-uwsgi-temp-path"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/var/lib/nginx/tmp/uwsgi --http-scgi-temp-path"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/var/lib/nginx/tmp/scgi --pid-path"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/run/nginx.pid --lock-path"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/run/lock/subsys/nginx "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--user")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("nginx "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--group")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("nginx --with-compat --with-debug --with-file-aio --with-google_perftools_module --with-http_addition_module --with-http_auth_request_module --with-http_dav_module --with-http_degradation_module --with-http_flv_module --with-http_gunzip_module --with-http_gzip_static_module --with-http_image_filter_module"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("dynamic --with-http_mp4_module --with-http_perl_module"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("dynamic --with-http_random_index_module --with-http_realip_module --with-http_secure_link_module --with-http_slice_module --with-http_ssl_module --with-http_stub_status_module --with-http_sub_module --with-http_v2_module --with-http_xslt_module"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("dynamic --with-mail"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("dynamic --with-mail_ssl_module --with-pcre --with-pcre-jit --with-stream"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("dynamic --with-stream_ssl_module --with-stream_ssl_preread_module --with-threads --with-cc-opt"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'-O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector-strong --param=ssp-buffer-size=4 -grecord-gcc-switches -specs=/usr/lib/rpm/redhat/redhat-hardened-cc1 -m64 -mtune=generic'")]),t._v(" --with-ld-opt"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'-Wl,-z,relro -specs=/usr/lib/rpm/redhat/redhat-hardened-ld -Wl,-E'")]),t._v(" --add-module"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("/ngx_http_substitutions_filter_module-master\n")])])]),e("h2",{attrs:{id:"测试启动"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#测试启动"}},[t._v("#")]),t._v(" 测试启动")]),t._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[t._v("./objs/nginx "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-t")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("service")]),t._v(" nginx stop\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("service")]),t._v(" nginx status\n")])])]),e("h2",{attrs:{id:"写入配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#写入配置"}},[t._v("#")]),t._v(" 写入配置")]),t._v(" "),e("div",{staticClass:"language-text extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v('server {\n    server_name www.example.com;\n \n    location / {\n        proxy_pass https://www.google.com/;\n \n        proxy_redirect https://www.google.com/ /;\n        proxy_cookie_domain google.com www.example.com;\n \n        proxy_set_header User-Agent $http_user_agent;\n        # 这里设置cookie，可根据自身情况选择是否替换\n        proxy_set_header Cookie "PREF=ID=047808f19f6de346:U=0f62f33dd8549d11:FF=2:LD=zh-CN:NW=1:TM=1325338577:LM=1332142444:GM=1:SG=2:S=rE0SyJh2W1IQ-Maw";\n \n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n \n        # 这里替换网页中的链接\n        subs_filter  http://www.google.com http://www.example.com;\n        subs_filter  https://www.google.com http://www.example.com;\n\n }\n}\n')])])]),e("h2",{attrs:{id:"替换-启动"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#替换-启动"}},[t._v("#")]),t._v(" 替换 启动")]),t._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("cp")]),t._v(" ./objs/nginx /usr/sbin/nginx\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("service")]),t._v(" nginx start\n")])])]),e("h4",{attrs:{id:"一些错误"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#一些错误"}},[t._v("#")]),t._v(" 一些错误")]),t._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[t._v("\n./configure: error: the HTTP rewrite module requires the PCRE library.\nyum "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-y")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" pcre-devel\n\n./configure: error: SSL modules require the OpenSSL library.\nyum "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-y")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" openssl openssl-devel\n\n\n./configure: error: the HTTP XSLT module requires the libxml2/libxslt\nyum "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-y")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" libxml2 libxml2-dev libxslt-devel\n\n./configure: error: the HTTP image filter module requires the GD library.\nyum "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-y")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" gd-devel\n\n./configure: error: perl module ExtUtils::Embed is required\nyum "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-y")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" perl-devel perl-ExtUtils-Embed\n\n./configure: error: the Google perftools module requires the Google perftools library. You can either "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("do")]),t._v(" not "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("enable")]),t._v(" the module or "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" the library\nyum "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" gperftools "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-y")]),t._v("\n\n")])])])])}),[],!1,null,null,null);e.default=r.exports}}]);
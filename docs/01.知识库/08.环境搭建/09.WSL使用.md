---
title: WSL使用
date: 2024-11-27 09:00:00
permalink: /pages/wsl-usage/
categories:
  - 知识库
  - 其他
  - 环境搭建
tags:
  - WSL
  - Windows
  - Linux
  - 开发环境
author:
  name: YAN
  link: https://github.com/chansanya
---

## WSL 简介

Windows Subsystem for Linux (WSL) 允许在 Windows 上直接运行 Linux 环境，无需虚拟机。

## 安装 WSL

### 方法一：命令行安装（推荐）

```powershell
# 安装默认的 Ubuntu 发行版
wsl --install

# 或者指定发行版
wsl --install -d Ubuntu-22.04
```


## 常用 WSL 命令

### 版本管理
```bash
# 设置 WSL 版本
wsl --set-version Ubuntu-22.04 2

# 查看版本信息
wsl --status
```

### 导入导出

[下载发行版](https://cloud-images.ubuntu.com/wsl/jammy/current/)

```bash
# 查看已安装的发行版
wsl --list --verbose 
wsl -l -v

# 停止 WSL 服务
wsl --shutdown

# 导出发行版
wsl --export Ubuntu-22.04 ubuntu-backup.tar

# 取消注册
wsl --unregister Ubuntu-22.04

# 导入发行版
wsl --import Ubuntu-22.04 C:\\WSL\\Ubuntu-new ubuntu-backup.tar

# 导入后设置默认发行版
wsl --set-default Ubuntu-22.04

# 修改默认用户
wsl -d Ubuntu-22.04 -u root -e bash -c "echo -e '[user]\ndefault=dev' >> /etc/wsl.conf"
```



### 修改默认用户
```bash
# 在 WSL 中执行
sudo nano /etc/wsl.conf
```

添加以下内容：
```ini
[user]
[wsl2]
memory=32GB
#swap=8GB
processors=16
#nat模式
#localhostForwarding=true

[experimental]
autoMemoryReclaim=gradual
#Mirrored 模式
networkingMode=mirrored
dnsTunneling=true
firewall=true
autoProxy=true
sparseVhd=true
```


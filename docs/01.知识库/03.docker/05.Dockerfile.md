---
title: Dockerfile
date: 2025-04-03 16:14:35
permalink: /pages/b56e94/
categories:
  - çŸ¥è¯†åº“
  - docker
tags:
  - 
author: 
  name: YAN
  link: https://github.com/chansanya
---


## ğŸ§± å¸¸ç”¨æŒ‡ä»¤

| æŒ‡ä»¤ | è¯´æ˜ |
|------|------|
| `FROM` | æŒ‡å®šåŸºç¡€é•œåƒ |
| `RUN` | æ‰§è¡Œå‘½ä»¤ï¼Œä¾‹å¦‚å®‰è£…è½¯ä»¶åŒ… |
| `COPY` | å¤åˆ¶æ–‡ä»¶åˆ°å®¹å™¨ä¸­ |
| `ADD` | ç±»ä¼¼ COPYï¼Œè¿˜æ”¯æŒ URL å’Œå‹ç¼©åŒ…è‡ªåŠ¨è§£å‹ |
| `WORKDIR` | è®¾ç½®å·¥ä½œç›®å½• |
| `CMD` | æŒ‡å®šå®¹å™¨å¯åŠ¨æ—¶æ‰§è¡Œçš„å‘½ä»¤ï¼ˆåªèƒ½æœ‰ä¸€ä¸ªï¼‰|
| `ENTRYPOINT` | è®¾ç½®ä¸»å¯åŠ¨å‘½ä»¤ï¼ˆå¯æ­é… CMDï¼‰ |
| `ENV` | è®¾ç½®ç¯å¢ƒå˜é‡ |
| `EXPOSE` | æŒ‡å®šå®¹å™¨ç›‘å¬ç«¯å£ |
| `ARG` | æ„å»ºå‚æ•°ï¼ˆä¸ ENV ç±»ä¼¼ï¼Œä½†åªåœ¨æ„å»ºé˜¶æ®µæœ‰æ•ˆï¼‰|



## åŸºç¡€é•œåƒ

### scratch
- Docker ä¸­æœ€å°çš„ç©ºç™½åŸºç¡€é•œåƒ

- é€‚åˆæ„å»ºæç®€é™æ€ç¼–è¯‘ç¨‹åºé•œåƒï¼ˆå¦‚ Go åº”ç”¨ï¼‰

### bosybox
- é›†æˆå¸¸ç”¨ Linux å·¥å…·çš„ç²¾ç®€å·¥å…·ç®±

- é•œåƒå°å·§ï¼ˆä»…å‡  MBï¼‰ï¼Œä¾¿äºå¿«é€ŸéªŒè¯

### Alpine

- è½»é‡çº§ã€å®‰å…¨æ€§é«˜çš„ Linux å‘è¡Œç‰ˆ
- åŠŸèƒ½å®Œå–„ï¼Œå†…ç½®åŒ…ç®¡ç†å™¨ apkï¼Œé€‚åˆç”Ÿäº§ç¯å¢ƒS



## ç¤ºä¾‹

### ğŸ§ª Spring Boot åº”ç”¨
```dockerfile
FROM adoptopenjdk/openjdk8:alpine-jre
ENV TZ=Asia/Shanghai
ARG JAR_FILE=target/*.jar
COPY ${JAR_FILE} app.jar
EXPOSE 8080
ENTRYPOINT ["java", "-jar", "/app.jar"]
```

### ğŸ§± Python åº”ç”¨

```Dockerfile
FROM python:3.10-slim
WORKDIR /app
COPY requirements.txt ./
RUN pip install --no-cache-dir -r requirements.txt
COPY . .
CMD ["python", "main.py"]
```

### ğŸ³ Vue åº”ç”¨ å¤šé˜¶æ®µæ„å»ºï¼ˆMulti-stage Buildï¼‰

ç”¨äºæ„å»ºæ›´å°ã€æ›´å®‰å…¨çš„é•œåƒã€‚

```Dockerfile
# æ„å»ºé˜¶æ®µ
FROM node:18-alpine as builder
WORKDIR /app
COPY . .
RUN npm install && npm run build

# è¿è¡Œé˜¶æ®µ
FROM nginx:stable-alpine
COPY --from=builder /app/dist /usr/share/nginx/html
COPY nginx/nginx.conf /etc/nginx/nginx.conf
EXPOSE 80
CMD ["nginx", "-g", "daemon off;"]
```

âœ…  ä¼˜åŠ¿ï¼šæ„å»ºä¾èµ–ä¸ä¼šè¿›å…¥æœ€ç»ˆé•œåƒï¼Œæå‡å®‰å…¨æ€§ä¸ä½“ç§¯ä¼˜åŒ–ã€‚

---

## âš¡ ç¼“å­˜ä¼˜åŒ–æŠ€å·§

é•œåƒæ„å»ºæ˜¯æŒ‰å±‚è¿›è¡Œçš„ï¼Œåˆç†æ‹†åˆ†æŒ‡ä»¤é¡ºåºå¯ä»¥æ›´å¥½åˆ©ç”¨ç¼“å­˜ã€‚

```Dockerfile
COPY requirements.txt ./
RUN pip install -r requirements.txt
COPY . .
```
ğŸ“Œ å»ºè®®ï¼šå°†å˜åŠ¨å°çš„æ–‡ä»¶ä¼˜å…ˆ COPYï¼Œé¿å…å› é¢‘ç¹å˜åŠ¨å¯¼è‡´ç¼“å­˜å¤±æ•ˆã€‚



### ğŸ› ï¸ æ„å»ºä¸è¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker build -t my-app .

# è¿è¡Œå®¹å™¨
docker run -d -p 3000:3000 --name my-container my-app

# è¿›å…¥å®¹å™¨
docker exec -it my-container sh
```


## ğŸ“ .dockerignore
ç±»ä¼¼ `.gitignore`ï¼Œå¯ä»¥é˜²æ­¢æŸäº›æ–‡ä»¶è¢«åŠ å…¥æ„å»ºä¸Šä¸‹æ–‡ã€‚

```
node_modules
*.log
Dockerfile
.dockerignore
.git
```